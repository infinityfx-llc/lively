import t from"@babel/runtime/helpers/defineProperty";import e from"@babel/runtime/helpers/objectWithoutProperties";import r from"@babel/runtime/helpers/slicedToArray";import n from"@babel/runtime/helpers/classCallCheck";import i from"@babel/runtime/helpers/createClass";import a from"@babel/runtime/helpers/inherits";import o from"@babel/runtime/helpers/possibleConstructorReturn";import s from"@babel/runtime/helpers/getPrototypeOf";import{i as u,U as c,g as l,x as f,h,D as p,b as v,s as y,c as d,a as b,e as m,L as O,P as g,f as j}from"./link-6447f4b2.js";var P=function t(e,r,n,i){if(u.object(e)){var a={};for(var o in e)a[o]=t(e[o],r[o],n,i);return a}return[i(e[0],r[0],n),e[1]]},w=function(t,e,r){return u.number(t)&&u.number(e)?t*(1-r)+e*r:r>.5?e:t},k=Object.freeze({__proto__:null,interpolate:P,constant:function(t){return t},linear:w,ease:function(t,e,r){return w(t,e,(1-Math.cos(r*Math.PI))/2)},spring:function(t,e,r){return r=1-1*Math.exp(-3.6*r)*Math.cos(2.5*Math.pow(r,2)*Math.PI),w(t,e,r)}}),x=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.reverse,a=void 0!==i&&i,o=r.repeat,s=void 0===o?1:o,u=r.delay,c=void 0===u?0:u,l=r.alternate,f=void 0!==l&&l;n(this,t),this.indices={},this.clip=e,this.t=0,this.T=e.duration*s+c,this.reverse=a,this.delay=c,this.alternate=f}return i(t,[{key:"getInterpolatedValue",value:function(t,e,r,n){if(u.function(e))e=this.clip.convert(e(r,this.clip.duration),t),e=c.toBase(e,t,n);else{t in this.indices||(this.indices[t]=this.reverse?e.length-1:0);var i,a=this.reverse?-1:1,o=this.indices[t],s=e[o],f=e[o+a],h=s.set;if(this.reverse?f.time>=r:f.time<=r){this.indices[t]=o+=a;var p=["start","end"],v=p[+!this.reverse],y=p[+this.reverse];v in s||y in f?(h=v in s?s[v]:f[y],i=!0):(s=e[o],f=e[o+a])}if(u.null(h)&&(h=l(n,t)),h=c.toBase(h,t,n),i)e=h;else{var d=u.null(f.set)?l(n,t):f.set;d=c.toBase(d,t,n);var b=k[f.interpolate]||w;e=P(h,d,(r-s.time)/(f.time-s.time),b)}}return e}},{key:"get",value:function(t){var e=this.t-this.delay,r=this.alternate&&Math.floor(e/this.clip.duration)%2==1;e%=this.clip.duration,e=f(this.reverse,r)?this.clip.duration-e:e;var n={};if(this.t>=this.delay)for(var i in n.origin=this.clip.origin,this.clip.properties)n[i]=this.getInterpolatedValue(i,this.clip.properties[i],e,t);return n}},{key:"step",value:function(t){return this.t+=t,this.t>=this.T}}]),t}();function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=s(t);if(e){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}var S=function(t){a(r,x);var e=D(r);function r(t){var i;return n(this,r),(i=e.call(this,{duration:1/0,properties:{},convert:t,origin:{x:.5,y:.5}})).cache={},i}return i(r,[{key:"add",value:function(t,e){this.clip.properties[t]=e}},{key:"getInterpolatedValue",value:function(t,e,r,n){u.null(e.internal.t)&&(e.internal.t=r),e.internal.t===r&&(this.cache[t]={});var i=0===e.internal.duration?1:Math.min((r-e.internal.t)/e.internal.duration,1),a=this.cache[t]||{};if(a.t===i)return a.value;var o=c.toBase(this.clip.convert(e(r,this.clip.duration),t),t,n),s=l(n,t);s=c.toBase(s,t,n);var f=P(s,o,i,w);return this.cache[t]={value:f,t:i},f}}]),r}(),M=["duration","delay","repeat","alternate","origin"];function A(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.duration,a=void 0===i?1:i,o=r.delay,s=r.repeat,c=r.alternate,l=r.origin,f=void 0===l?{x:.5,y:.5}:l,h=e(r,M),p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.duration=a,this.origin=m(f),this.initial=p,this.initials=E({},p),this.channel=new S(this.convert.bind(this)),this.properties=this.parse(h),this.isEmpty=u.empty(this.properties),this.defaults={delay:o,repeat:s,alternate:c}}return i(t,[{key:"length",value:function(){return this.duration*(this.defaults.repeat||1)+(this.defaults.delay||0)}},{key:"parse",value:function(t){var e=this,r=function(r){var n=t[r];if(O.isInstance(n))return e.channel.add(r,n),delete t[r],"continue";if(u.function(n))return"continue";(n=u.array(n)?n:[n]).length<2?n.unshift(r in e.initial?e.initial[r]:null):e.initials[r]=n[0];for(var i=n.map((function(t){return e.sanitize(t,r)})),a=0;a<i.length;a++)e.quantize(i,a);t[r]=i};for(var n in t)r(n);for(var i in this.initials)this.initials[i]=this.convert(this.initials[i],i);return t}},{key:"sanitize",value:function(t,e){u.object(t)||(t={set:t}),h(t,g)||(t={set:t}),"set"in t||(t.set="start"in t?t.start:t.end),"time"in t&&t.time>this.duration&&delete t.time,t=E({},t);var r,n=A(g);try{for(n.s();!(r=n.n()).done;){var i=r.value;i in t&&(t[i]=this.convert(t[i],e))}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"quantize",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e-1;if("time"in t[e])return t[e].time;if(0==e||e==t.length-1)return t[e].time=0==e?0:this.duration;var n=this.quantize(t,r,r);return t[e].time=n+(this.quantize(t,e+1,r)-n)*((e-r)/(e-r+1))}},{key:"convert",value:function(t,e){if(u.null(t))return e in this.initial?this.convert(this.initial[e],e):null;if(u.object(t)){var n,i=Object.keys(t),a=A(j);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(h(t,o)){i=o;break}}}catch(t){a.e(t)}finally{a.f()}t=E({},t);var s,l=A(i);try{for(l.s();!(s=l.n()).done;){var f=s.value,b=e in p?p[e][f]:p[f];t[f]=f in t?this.convert(t[f]):b}}catch(t){l.e(t)}finally{l.f()}return t}var m;if(u.string(t)){if(t.match(/^#[0-9a-f]{3,8}$/i))return v(t);if(t.match(/^rgba?\(.*\)$/i))return y(t);var O=d(t),g=r(O,2);if(t=g[0],!(m=g[1]))return[t,m]}return[t,m=c.normalize(m,e)]}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new x(this,b(t,this.defaults))}}]),t}(),C={create:function(t){var e=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.use=t.use.bind(t,e),t};return e.use=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t(e),i=r(n,2),a=i[0],o=i[1];return new B(a,o)},e},isAnimation:function(t){return t instanceof Function&&"use"in t}},R=["direction"];function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?q(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=C.create((function(t){var r=t.direction,n=void 0===r?"up":r,i=e(t,R),a="0px",o="20px";switch(n){case"down":o="-20px";break;case"left":a="20px",o="0px";break;case"right":a="-20px",o="0px"}return[T({position:{x:0,y:0},opacity:1,duration:.5},i),{position:{x:a,y:o},opacity:0}]}));function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?V(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=C.create((function(t){return[$({opacity:1,scale:1,duration:.25},t),{opacity:0,scale:.85}]}));export{C as A,B as C,_ as M,U as P};
