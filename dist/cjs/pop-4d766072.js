"use strict";var t=require("./_rollupPluginBabelHelpers-7a0b7756.js"),e=function(){function e(){t._classCallCheck(this,e),this.queue=[],this.tick()}var i,n;return t._createClass(e,[{key:"tick",value:(n=t._asyncToGenerator(t._regeneratorRuntime().mark((function e(){var i,n;return t._regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Date.now(),n=0;case 2:if(!(n<this.queue.length+1)){t.next=10;break}if(!(this.queue.length===n||this.queue[n].timestamp>i)){t.next=6;break}return this.queue.splice(0,n),t.abrupt("break",10);case 6:this.queue[n].callback();case 7:n++,t.next=2;break;case 10:requestAnimationFrame(this.tick.bind(this));case 11:case"end":return t.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"search",value:function(t){for(var e,i,n=0,o=this.queue.length-1;n<=o;)if(e=n+o>>>1,(i=this.queue[e].timestamp-t.timestamp)<0)n=e+1;else{if(!(i>0))return e;o=e-1}return n}},{key:"insert",value:function(t){var e=this.search(t);this.queue.splice(e,0,t)}},{key:"delay",value:function(t,e){t instanceof Function&&this.insert({callback:t,timestamp:Date.now()+1e3*e})}}],[{key:"get",value:function(){return"UITools"in window||(window.UITools={}),"AnimationLoop"in window.UITools||(window.UITools.AnimationQueue=new e),window.UITools.AnimationQueue}},{key:"delay",value:(i=t._asyncToGenerator(t._regeneratorRuntime().mark((function e(i,n){return t._regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get().delay(i,n));case 1:case"end":return t.stop()}}),e,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"sleep",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(i){t.delay(i,e)}))}}]),e}(),i=function(e){var i=e.match(/^#([\da-f]{1,2})([\da-f]{1,2})([\da-f]{1,2})([\da-f]{2})?/i),n=t._slicedToArray(i,5);n[0];var o=n[1],r=n[2],a=n[3],s=n[4];return{r:parseInt(o.padStart(2,o),16),g:parseInt(r.padStart(2,r),16),b:parseInt(a.padStart(2,a),16),a:void 0!==s?parseInt(s,16):255}},n=function(e){var i=e.match(/^rgba?\((\d+)\D+(\d+)\D+(\d+)\D*(\d+)?\)/i),n=t._slicedToArray(i,5);n[0];var o=n[1],r=n[2],a=n[3],s=n[4];return{r:parseInt(o),g:parseInt(r),b:parseInt(a),a:void 0!==s?parseInt(s):255}},o=["delay","duration","loop","interpolate","origin","scaleCorrection"],r=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.delay,n=void 0===i?0:i,a=e.duration,s=void 0===a?1:a,l=e.loop,c=void 0!==l&&l,u=e.interpolate,d=void 0===u?"ease":u,p=e.origin,h=void 0===p?{x:.5,y:.5}:p,v=e.scaleCorrection,f=void 0!==v&&v,y=t._objectWithoutProperties(e,o),g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t._classCallCheck(this,r),this.scaleCorrection=f,this.keyframes=this.getKeyframes(y,g),this.delay=n,this.duration=s,this.delta=s/(this.keyframes.length-1),this.interpolation=d,this.origin=this.originToStyle(h),this.loop=c}return t._createClass(r,[{key:"originToStyle",value:function(e){var i=.5,n=.5;if("object"===t._typeof(e))i=e.x,n=e.y;else if("string"==typeof e)switch(e){case"left":i=0;break;case"right":i=1;break;case"top":n=0;break;case"bottom":n=1}else i=n=e;return"".concat(100*i,"% ").concat(100*n,"%")}},{key:"getKeyframes",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=0,a=function(a){var s=a in n?n[a]:r.initials[a];Array.isArray(e[a])||(e[a]=[e[a]]),e[a]=e[a].length>1?e[a]:[s].concat(t._toConsumableArray(e[a])),e[a]=e[a].map((function(t){return i.sanitize(a,t)})),o=e[a].length>o?e[a].length:o};for(var s in e)a(s);return new Array(o).fill(0).map((function(t,n){var a={};for(var s in e)s in r.initials&&(a[s]=i.interpolateKeyframe(e[s],n,o));return i.keyframeToStyle(a)}))}},{key:"sanitize",value:function(e,o){var a=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof o){if(o.match(/^#[0-9a-f]{3,8}$/i))return i(o);if(o.match(/^rgba?\(.*\)$/i))return n(o);var l=parseFloat(o),c=o.match(/[^0-9\.]*$/i);return isNaN(l)?r.initials[e]:("%"===c&&(l/=100),c?[l,c]:l)}if("object"===t._typeof(o)){var u=Object.keys(o);("x"in o||"y"in o)&&(u=["x","y"]),("r"in o||"g"in o||"b"in o||"a"in o)&&(u=["r","g","b","a"]),("left"in o||"right"in o||"top"in o||"bottom"in o)&&(u=["left","right","top","bottom"]),u.forEach((function(t){o[t]=a.sanitize(e,o[t],t)}))}return void 0!==o?o:r.initials[e][s]}},{key:"interpolate",value:function(t,e,i){if("string"==typeof t||"string"==typeof e)return i>.5?e:t;var n=!1;Array.isArray(t)&&(n=t[1],t=t[0]),Array.isArray(e)&&(n=e[1],e=e[0]);var o=t*(1-i)+e*i;return n?[o,n]:o}},{key:"interpolateKeyframe",value:function(e,i,n){var o=this;if(e.length===n)return e[i];var r=i*((e.length-1)/(n-1)),a=Math.floor(r),s=e[a];if(a===e.length-1)return s;var l=e[a+1];if("object"===t._typeof(s)){var c={};return Object.keys(s).forEach((function(t){c[t]=o.interpolate(s[t],l[t],r-a)})),c}return this.interpolate(s,l,r-a)}},{key:"toString",value:function(t,e){return Array.isArray(t)&&(e=t[1],t=t[0]),t*("%"===e?100:1)+e}},{key:"toLength",value:function(t){return Array.isArray(t)&&(t="px"===t[1]?t[0]+"px":t[0]),t}},{key:"keyframeToStyle",value:function(e){var i=this,n={transform:""};return Object.entries(e).forEach((function(e){var o=t._slicedToArray(e,2),r=o[0],a=o[1];switch(r){case"position":n.transform+="translate(".concat(i.toString(a.x,"px"),", ").concat(i.toString(a.y,"px"),") ");break;case"scale":if("number"==typeof a&&(a={x:a,y:a}),i.scaleCorrection){n.width=i.toLength(a.x),n.height=i.toLength(a.y);break}n.transform+="scale(".concat(i.toString(a.x,"%"),", ").concat(i.toString(a.y,"%"),") ");break;case"rotation":n.transform+="rotate(".concat((i.toString(a),"deg"),") ");break;case"clip":n.clipPath="inset(".concat(i.toString(a.top,"%")," ").concat(i.toString(a.right,"%")," ").concat(i.toString(a.bottom,"%")," ").concat(i.toString(a.left,"%"),")");break;case"borderRadius":n[r]=i.toString(a,"px");break;case"backgroundColor":case"color":n[r]="rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(a.a,")");break;case"opacity":case"active":n[r]=a}})),n.transform.length||delete n.transform,n}},{key:"setInitialStyles",value:function(t){r.setInitial(t);var e=this.keyframes[0];t.style.transitionDuration="0s",this.apply(t,e,!0)}},{key:"test",value:function(t,e,i,n,o,r){var a=n+o+((i-=e-(t="string"==typeof t?parseInt(t)/e:t)*e)<0?i:0),s=n/(n+o);return{size:(i<0?0:i)+"px",padStart:(n=r?t*n:a*s)+"px",padEnd:(o=r?t*o:a*(1-s))+"px"}}},{key:"apply",value:function(i,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var e=i.UITools.initialStyles;Object.entries(n).forEach((function(n){var r=t._slicedToArray(n,2),a=r[0],s=r[1];if("width"===a){var l=e.clientWidth,c=e.width,u=e.paddingLeft,d=e.paddingRight,p=e.includePadding,h=o.test(s,l,c,u,d,p),v=h.size,f=h.padStart,y=h.padEnd;return i.style.width=v,i.style.paddingLeft=f,void(i.style.paddingRight=y)}if("height"===a){var g=e.clientHeight,m=e.height,b=e.paddingTop,k=e.paddingBottom,w=e.includePadding,I=o.test(s,g,m,b,k,w),x=I.size,T=I.padStart,U=I.padEnd;return i.style.height=x,i.style.paddingTop=T,void(i.style.paddingBottom=U)}"active"!==a&&(i.style[a]=s)}))};if("active"in n){var s=Object.keys(n.active)[0];"start"===s||r?(i.style.display=n.active[s]?"":"none",r?a():e.delay(a,.01)):(e.delay((function(){i.style.display=n.active[s]?"":"none"}),this.delta),a())}else a()}},{key:"start",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.immediate,n=void 0!==i&&i,o=e.reverse,r=void 0!==o&&o;!t.UITools.animating||n?(t.style.transitionDuration="".concat(this.delta,"s"),t.style.transitionTimingFunction=this.interpolation,t.style.transformOrigin=this.origin,t.UITools.animating=!0,t.UITools.index=1,this.getNext(t,r)):t.UITools.queue.push([this,{reverse:r}])}},{key:"play",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.delay,r=void 0===o?0:o,a=n.immediate,s=void 0!==a&&a,l=n.reverse,c=void 0!==l&&l;t.style&&(this.delay||r?e.delay((function(){return i.start(t,{immediate:s,reverse:c})}),this.delay+r):this.start(t,{immediate:s,reverse:c}))}},{key:"getNext",value:function(i){var n=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i.UITools.index===this.keyframes.length){i.UITools.animating=!1;var r=i.UITools.queue.shift()||[],a=t._slicedToArray(r,2),s=a[0],l=a[1];return s?s.start(i,l):void(this.loop&&this.start(i,l))}var c=i.UITools.index;o&&(c=this.keyframes.length-1-c),requestAnimationFrame((function(){n.apply(i,n.keyframes[c])})),i.UITools.index++,e.delay((function(){return n.getNext(i,o)}),this.delta)}}],[{key:"setInitial",value:function(t){var e=getComputedStyle(t),i=e.width,n=e.height,o=e.paddingLeft,r=e.paddingRight,a=e.paddingTop,s=e.paddingBottom,l=e.borderRadius,c=e.boxSizing,u=e.backgroundColor,d=e.color,p=t.getBoundingClientRect(),h=p.x,v=p.y;"UITools"in t||(t.UITools={}),"queue"in t.UITools||(t.UITools.queue=[]),"initialStyles"in t.UITools||(t.UITools.initialStyles={x:h,y:v,includePadding:"border-box"===c,clientWidth:t.clientWidth,clientHeight:t.clientHeight,width:parseInt(i),height:parseInt(n),paddingLeft:parseInt(o),paddingRight:parseInt(r),paddingTop:parseInt(a),paddingBottom:parseInt(s),borderRadius:parseInt(l.split(" ")[0]),backgroundColor:u,color:d})}}]),r}();function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{scaleCorrection:t.scaleCorrection,use:a.use.bind(this,t)}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{scaleCorrection:t.scaleCorrection,use:s.use.bind(this,t)}}t._defineProperty(r,"initials",{opacity:1,scale:{x:1,y:1},position:{x:0,y:0},clip:{left:0,top:0,right:0,bottom:0},borderRadius:0,active:{start:!0},backgroundColor:{r:127,g:127,b:127,a:255},color:{r:127,g:127,b:127,a:255}}),a.use=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.direction,i=void 0===e?"up":e,n=t.scaleCorrection,o=void 0!==n&&n,a="0px",s="20px";switch(i){case"down":s="-20px";break;case"left":a="20px",s="0px";break;case"right":a="-20px",s="0px"}return new r({position:{x:"0px",y:"0px"},opacity:1,scaleCorrection:o,duration:.5},{position:{x:a,y:s},opacity:0})},s.use=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scaleCorrection,i=void 0!==e&&e;return new r({opacity:1,scale:1,scaleCorrection:i,duration:.25},{opacity:0,scale:.85})},exports.Animation=r,exports.AnimationQueue=e,exports.Move=a,exports.Pop=s,exports.addEventListener=function(t,e){var i;e instanceof Function&&(null!==(i=window.UITools)&&void 0!==i&&i.Events||(window.UITools={Events:{}}),t in window.UITools.Events||(window.UITools.Events[t]={unique:0},window.addEventListener(t,(function(e){Object.values(window.UITools.Events[t]).forEach((function(t){t instanceof Function&&t(e)}))}))),e.UITools={ListenerID:window.UITools.Events[t].unique},window.UITools.Events[t][window.UITools.Events[t].unique]=e,window.UITools.Events[t].unique++)},exports.removeEventListener=function(t,e){var i,n,o;"undefined"!=typeof window&&null!==(i=window.UITools)&&void 0!==i&&null!==(n=i.Events)&&void 0!==n&&n[t]&&null!=e&&null!==(o=e.UITools)&&void 0!==o&&o.ListenerID&&delete window.UITools.Events[t][e.UITools.ListenerID]};
