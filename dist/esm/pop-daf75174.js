import{b as t,d as e,h as i,i as n,g as a,e as o,c as r,j as s,l}from"./_rollupPluginBabelHelpers-e1425fd3.js";var c=function(){function a(){e(this,a),this.queue=[],this.tick()}var o,r;return t(a,[{key:"tick",value:(r=i(n().mark((function t(){var e,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Date.now(),i=0;case 2:if(!(i<this.queue.length+1)){t.next=10;break}if(!(this.queue.length===i||this.queue[i].timestamp>e)){t.next=6;break}return this.queue.splice(0,i),t.abrupt("break",10);case 6:this.queue[i].callback();case 7:i++,t.next=2;break;case 10:requestAnimationFrame(this.tick.bind(this));case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"search",value:function(t){for(var e,i,n=0,a=this.queue.length-1;n<=a;)if(e=n+a>>>1,(i=this.queue[e].timestamp-t.timestamp)<0)n=e+1;else{if(!(i>0))return e;a=e-1}return n}},{key:"insert",value:function(t){var e=this.search(t);this.queue.splice(e,0,t)}},{key:"delay",value:function(t,e){t instanceof Function&&this.insert({callback:t,timestamp:Date.now()+1e3*e})}}],[{key:"get",value:function(){return"UITools"in window||(window.UITools={}),"AnimationLoop"in window.UITools||(window.UITools.AnimationQueue=new a),window.UITools.AnimationQueue}},{key:"delay",value:(o=i(n().mark((function t(e,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.get().delay(e,i));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"sleep",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(i){t.delay(i,e)}))}}]),a}(),u=function(t){var e=t.match(/^#([\da-f]{1,2})([\da-f]{1,2})([\da-f]{1,2})([\da-f]{2})?/i),i=a(e,5);i[0];var n=i[1],o=i[2],r=i[3],s=i[4];return{r:parseInt(n.padStart(2,n),16),g:parseInt(o.padStart(2,o),16),b:parseInt(r.padStart(2,r),16),a:void 0!==s?parseInt(s,16):255}},d=function(t){var e=t.match(/^rgba?\((\d+)\D+(\d+)\D+(\d+)\D*(\d+)?\)/i),i=a(e,5);i[0];var n=i[1],o=i[2],r=i[3],s=i[4];return{r:parseInt(n),g:parseInt(o),b:parseInt(r),a:void 0!==s?parseInt(s):255}},h=function(t,e){var i;e instanceof Function&&(null!==(i=window.UITools)&&void 0!==i&&i.Events||(window.UITools={Events:{}}),t in window.UITools.Events||(window.UITools.Events[t]={unique:0},window.addEventListener(t,(function(e){Object.values(window.UITools.Events[t]).forEach((function(t){t instanceof Function&&t(e)}))}))),e.UITools={ListenerID:window.UITools.Events[t].unique},window.UITools.Events[t][window.UITools.Events[t].unique]=e,window.UITools.Events[t].unique++)},p=function(t,e){var i,n,a;"undefined"!=typeof window&&null!==(i=window.UITools)&&void 0!==i&&null!==(n=i.Events)&&void 0!==n&&n[t]&&null!=e&&null!==(a=e.UITools)&&void 0!==a&&a.ListenerID&&delete window.UITools.Events[t][e.UITools.ListenerID]},v=["delay","duration","loop","interpolate","origin","scaleCorrection"],f=function(){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delay,a=void 0===n?0:n,o=t.duration,r=void 0===o?1:o,l=t.loop,c=void 0!==l&&l,u=t.interpolate,d=void 0===u?"ease":u,h=t.origin,p=void 0===h?{x:.5,y:.5}:h,f=t.scaleCorrection,g=void 0!==f&&f,y=s(t,v),m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,i),this.scaleCorrection=g,this.keyframes=this.getKeyframes(y,m),this.delay=a,this.duration=r,this.delta=r/(this.keyframes.length-1),this.interpolation=d,this.origin=this.originToStyle(p),this.loop=c}return t(i,[{key:"originToStyle",value:function(t){var e=.5,i=.5;if("object"===o(t))e=t.x,i=t.y;else if("string"==typeof t)switch(t){case"left":e=0;break;case"right":e=1;break;case"top":i=0;break;case"bottom":i=1}else e=i=t;return"".concat(100*e,"% ").concat(100*i,"%")}},{key:"getKeyframes",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0,o=function(o){var r=o in n?n[o]:i.initials[o];Array.isArray(t[o])||(t[o]=[t[o]]),t[o]=t[o].length>1?t[o]:[r].concat(l(t[o])),t[o]=t[o].map((function(t){return e.sanitize(o,t)})),a=t[o].length>a?t[o].length:a};for(var r in t)o(r);return new Array(a).fill(0).map((function(n,o){var r={};for(var s in t)s in i.initials&&(r[s]=e.interpolateKeyframe(t[s],o,a));return e.keyframeToStyle(r)}))}},{key:"sanitize",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof e){if(e.match(/^#[0-9a-f]{3,8}$/i))return u(e);if(e.match(/^rgba?\(.*\)$/i))return d(e);var r=parseFloat(e),s=e.match(/[^0-9\.]*$/i);return isNaN(r)?i.initials[t]:("%"===s&&(r/=100),s?[r,s]:r)}if("object"===o(e)){var l=Object.keys(e);("x"in e||"y"in e)&&(l=["x","y"]),("r"in e||"g"in e||"b"in e||"a"in e)&&(l=["r","g","b","a"]),("left"in e||"right"in e||"top"in e||"bottom"in e)&&(l=["left","right","top","bottom"]),l.forEach((function(i){e[i]=n.sanitize(t,e[i],i)}))}return void 0!==e?e:i.initials[t][a]}},{key:"interpolate",value:function(t,e,i){if("string"==typeof t||"string"==typeof e)return i>.5?e:t;var n=!1;Array.isArray(t)&&(n=t[1],t=t[0]),Array.isArray(e)&&(n=e[1],e=e[0]);var a=t*(1-i)+e*i;return n?[a,n]:a}},{key:"interpolateKeyframe",value:function(t,e,i){var n=this;if(t.length===i)return t[e];var a=e*((t.length-1)/(i-1)),r=Math.floor(a),s=t[r];if(r===t.length-1)return s;var l=t[r+1];if("object"===o(s)){var c={};return Object.keys(s).forEach((function(t){c[t]=n.interpolate(s[t],l[t],a-r)})),c}return this.interpolate(s,l,a-r)}},{key:"toString",value:function(t,e){return Array.isArray(t)&&(e=t[1],t=t[0]),t*("%"===e?100:1)+e}},{key:"toLength",value:function(t){return Array.isArray(t)&&(t="px"===t[1]?t[0]+"px":t[0]),t}},{key:"keyframeToStyle",value:function(t){var e=this,i={transform:""};return Object.entries(t).forEach((function(t){var n=a(t,2),o=n[0],r=n[1];switch(o){case"position":i.transform+="translate(".concat(e.toString(r.x,"px"),", ").concat(e.toString(r.y,"px"),") ");break;case"scale":if("number"==typeof r&&(r={x:r,y:r}),e.scaleCorrection){i.width=e.toLength(r.x),i.height=e.toLength(r.y);break}i.transform+="scale(".concat(e.toString(r.x,"%"),", ").concat(e.toString(r.y,"%"),") ");break;case"rotation":i.transform+="rotate(".concat((e.toString(r),"deg"),") ");break;case"clip":i.clipPath="inset(".concat(e.toString(r.top,"%")," ").concat(e.toString(r.right,"%")," ").concat(e.toString(r.bottom,"%")," ").concat(e.toString(r.left,"%"),")");break;case"borderRadius":i[o]=e.toString(r,"px");break;case"backgroundColor":case"color":i[o]="rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(r.a,")");break;case"opacity":case"active":i[o]=r}})),i.transform.length||delete i.transform,i}},{key:"setInitialStyles",value:function(t){i.setInitial(t);var e=this.keyframes[0];t.style.transitionDuration="0s",this.apply(t,e,!0)}},{key:"test",value:function(t,e,i,n,a,o){var r=n+a+((i-=e-(t="string"==typeof t?parseInt(t)/e:t)*e)<0?i:0),s=n/(n+a);return{size:(i<0?0:i)+"px",padStart:(n=o?t*n:r*s)+"px",padEnd:(a=o?t*a:r*(1-s))+"px"}}},{key:"apply",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(){var n=t.UITools.initialStyles;Object.entries(e).forEach((function(e){var o=a(e,2),r=o[0],s=o[1];if("width"===r){var l=n.clientWidth,c=n.width,u=n.paddingLeft,d=n.paddingRight,h=n.includePadding,p=i.test(s,l,c,u,d,h),v=p.size,f=p.padStart,g=p.padEnd;return t.style.width=v,t.style.paddingLeft=f,void(t.style.paddingRight=g)}if("height"===r){var y=n.clientHeight,m=n.height,b=n.paddingTop,k=n.paddingBottom,w=n.includePadding,I=i.test(s,y,m,b,k,w),x=I.size,T=I.padStart,U=I.padEnd;return t.style.height=x,t.style.paddingTop=T,void(t.style.paddingBottom=U)}"active"!==r&&(t.style[r]=s)}))};if("active"in e){var r=Object.keys(e.active)[0];"start"===r||n?(t.style.display=e.active[r]?"":"none",n?o():c.delay(o,.01)):(c.delay((function(){t.style.display=e.active[r]?"":"none"}),this.delta),o())}else o()}},{key:"start",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.immediate,n=void 0!==i&&i,a=e.reverse,o=void 0!==a&&a;!t.UITools.animating||n?(t.style.transitionDuration="".concat(this.delta,"s"),t.style.transitionTimingFunction=this.interpolation,t.style.transformOrigin=this.origin,t.UITools.animating=!0,t.UITools.index=1,this.getNext(t,o)):t.UITools.queue.push([this,{reverse:o}])}},{key:"play",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.delay,a=void 0===n?0:n,o=i.immediate,r=void 0!==o&&o,s=i.reverse,l=void 0!==s&&s;t.style&&(this.delay||a?c.delay((function(){return e.start(t,{immediate:r,reverse:l})}),this.delay+a):this.start(t,{immediate:r,reverse:l}))}},{key:"getNext",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.UITools.index===this.keyframes.length){t.UITools.animating=!1;var n=t.UITools.queue.shift()||[],o=a(n,2),r=o[0],s=o[1];return r?r.start(t,s):void(this.loop&&this.start(t,s))}var l=t.UITools.index;i&&(l=this.keyframes.length-1-l),requestAnimationFrame((function(){e.apply(t,e.keyframes[l])})),t.UITools.index++,c.delay((function(){return e.getNext(t,i)}),this.delta)}}],[{key:"setInitial",value:function(t){var e=getComputedStyle(t),i=e.width,n=e.height,a=e.paddingLeft,o=e.paddingRight,r=e.paddingTop,s=e.paddingBottom,l=e.borderRadius,c=e.boxSizing,u=e.backgroundColor,d=e.color,h=t.getBoundingClientRect(),p=h.x,v=h.y;"UITools"in t||(t.UITools={}),"queue"in t.UITools||(t.UITools.queue=[]),"initialStyles"in t.UITools||(t.UITools.initialStyles={x:p,y:v,includePadding:"border-box"===c,clientWidth:t.clientWidth,clientHeight:t.clientHeight,width:parseInt(i),height:parseInt(n),paddingLeft:parseInt(a),paddingRight:parseInt(o),paddingTop:parseInt(r),paddingBottom:parseInt(s),borderRadius:parseInt(l.split(" ")[0]),backgroundColor:u,color:d})}}]),i}();function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{scaleCorrection:t.scaleCorrection,use:g.use.bind(this,t)}}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{scaleCorrection:t.scaleCorrection,use:y.use.bind(this,t)}}r(f,"initials",{opacity:1,scale:{x:1,y:1},position:{x:0,y:0},clip:{left:0,top:0,right:0,bottom:0},borderRadius:0,active:{start:!0},backgroundColor:{r:127,g:127,b:127,a:255},color:{r:127,g:127,b:127,a:255}}),g.use=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.direction,i=void 0===e?"up":e,n=t.scaleCorrection,a=void 0!==n&&n,o="0px",r="20px";switch(i){case"down":r="-20px";break;case"left":o="20px",r="0px";break;case"right":o="-20px",r="0px"}return new f({position:{x:"0px",y:"0px"},opacity:1,scaleCorrection:a,duration:.5},{position:{x:o,y:r},opacity:0})},y.use=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scaleCorrection,i=void 0!==e&&e;return new f({opacity:1,scale:1,scaleCorrection:i,duration:.25},{opacity:0,scale:.85})};export{f as A,g as M,y as P,h as a,c as b,p as r};
